{"version":3,"file":"admin-validator.js","names":["_joi","_interopRequireDefault","require","_responseHandler","AdminValidator","_createClass2","default","_this","_classCallCheck2","_defineProperty2","schemaName","req","res","next","schema","schemas","_schema$validate","validate","body","error","errorMessage","message","replace","responseHandler","errorResponse","err","validateAndNext","signup","Joi","object","name","string","required","Error","email","minDomainSegments","tlds","allow","kyc_document","array","phone_number","pattern","min","max","messages","password","bio","login","update","is_private","boolean","_default","exports"],"sources":["../../../../../src/modules/v1/admin/validators/admin-validator.js"],"sourcesContent":["import Joi from 'joi';\nimport { responseHandler } from '../../../../utils/response-handler';\n\nclass AdminValidator {\n    constructor() {\n        this.schemas = {\n            signup: Joi.object({\n                name: Joi.string().required().error(new Error(\"Name is required\")),\n                email: Joi.string().required().email({ minDomainSegments: 2, tlds: { allow: ['com', 'net'] } }).required().error(new Error(\"Email is required\")),\n                kyc_document: Joi.array().required().error(new Error(\"kyc documents are required\")),\n                phone_number: Joi.string().pattern(/^\\+?[0-9\\s]+$/).min(4).max(15).required().messages({\n                    'string.pattern.base': 'Phone number must only contain digits',\n                    \"string.min\": \"Phone number must be minimum 4 digit number\",\n                    \"string.max\": \"Phone number must be maximum 15 digit number\",\n                    \"any.required\": \"Phone number is required\"\n                }),\n                password: Joi.string().required().error(new Error(\"Password is required\")),\n                bio: Joi.string().error(new Error(\"Enter a valid bio\")),\n            }),\n\n            login: Joi.object({\n                email: Joi.string().required().error(new Error(\"Email is required\")),\n                password: Joi.string().required().error(new Error(\"Password is required\")),\n            }),\n\n            update: Joi.object({\n                name: Joi.string().error(new Error(\"Enter a valid name\")),\n                email: Joi.string().email({ minDomainSegments: 2, tlds: { allow: ['com', 'net'] } }).required().error(new Error(\"Enter a valid email\")),\n                phone_number: Joi.string().pattern(/^\\+?[0-9\\s]+$/).min(4).max(15).required().messages({\n                    'string.pattern.base': 'Phone number must only contain digits',\n                    \"string.min\": \"Phone number must be minimum 4 digit number\",\n                    \"string.max\": \"Phone number must be maximum 15 digit number\",\n                    \"any.required\": \"Phone number is required\"\n                }),\n                bio: Joi.string().error(new Error(\"Enter a valid bio\")),\n                is_private: Joi.boolean().error(new Error(\"Choose a proper account type\")),\n            }),\n        };\n    }\n\n    validateAndNext = (schemaName) => (req, res, next) => {\n        const schema = this.schemas[schemaName];\n        try {\n            const { error } = schema.validate(req.body);\n            if (!error) {\n                next();\n            } else {\n                const errorMessage = error.message.replace(/[&\\/\\\\#,+()$~%.'\":*?<>{}]/g, '');\n                return responseHandler.errorResponse(res, {}, errorMessage, 400);\n            }\n        } catch (err) {\n            return responseHandler.errorResponse(res, err);\n        }\n    };\n\n    signup = this.validateAndNext('signup');\n    login = this.validateAndNext('login');\n    update = this.validateAndNext('update');\n}\n\nexport default new AdminValidator();\n"],"mappings":"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"}