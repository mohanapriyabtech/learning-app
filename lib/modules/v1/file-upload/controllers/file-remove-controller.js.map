{"version":3,"file":"file-remove-controller.js","names":["_responseHandler","require","fs","config","FileRemoveController","_classCallCheck2","default","_createClass2","key","value","_delete2","_asyncToGenerator2","_regenerator","mark","_callee","req","res","imagePath","filePath","wrap","_callee$","_context","prev","next","body","split","concat","process","env","MONGODB_HOST","existsSync","abrupt","responseHandler","errorResponse","unlink","err","successResponse","t0","console","log","stop","_delete","_x","_x2","apply","arguments","_default","exports"],"sources":["../../../../../src/modules/v1/file-upload/controllers/file-remove-controller.js"],"sourcesContent":["import { responseHandler } from \"../../../../utils/response-handler\";\nconst fs = require('fs');\nrequire('dotenv').config();\n\n\nclass FileRemoveController {\n\n    constructor() {\n    }\n\n    /**\n     * @description  API for File delete\n     * @param {*} req \n     * @param {*} res \n     */\n\n    async delete(req, res) {\n\n        try {\n            const imagePath = req.body.imagePath.split(`${process.env.MONGODB_HOST}/`)[1]\n            let filePath = (`/var/www/html/${imagePath}`);\n\n            if (!fs.existsSync(filePath)) {\n                return responseHandler.errorResponse(res, {}, \"Image Not Exist\", 400)\n            }\n\n            if (fs.existsSync(filePath)) {\n                fs.unlink(filePath, (err) => {\n                    if (err) {\n                        throw err;\n                    }\n                    return responseHandler.successResponse(res, {}, \"Files Removed Successfully\")\n                })\n            }\n        }\n\n        catch (err) {\n            console.log(err);\n            return responseHandler.errorResponse(res, err);\n        }\n\n    }\n}\n\n\nexport default new FileRemoveController();"],"mappings":";;;;;;;;;;;AAAA,IAAAA,gBAAA,GAAAC,OAAA;AACA,IAAMC,EAAE,GAAGD,OAAO,CAAC,IAAI,CAAC;AACxBA,OAAO,CAAC,QAAQ,CAAC,CAACE,MAAM,CAAC,CAAC;AAAC,IAGrBC,oBAAoB;EAEtB,SAAAA,qBAAA,EAAc;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAF,oBAAA;EACd;;EAEA;AACJ;AACA;AACA;AACA;EAJI,IAAAG,aAAA,CAAAD,OAAA,EAAAF,oBAAA;IAAAI,GAAA;IAAAC,KAAA;MAAA,IAAAC,QAAA,OAAAC,kBAAA,CAAAL,OAAA,gBAAAM,YAAA,CAAAN,OAAA,CAAAO,IAAA,CAMA,SAAAC,QAAaC,GAAG,EAAEC,GAAG;QAAA,IAAAC,SAAA,EAAAC,QAAA;QAAA,OAAAN,YAAA,CAAAN,OAAA,CAAAa,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAGPL,SAAS,GAAGF,GAAG,CAACS,IAAI,CAACP,SAAS,CAACQ,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,YAAY,MAAG,CAAC,CAAC,CAAC,CAAC;cACzEX,QAAQ,oBAAAQ,MAAA,CAAqBT,SAAS;cAAA,IAErCf,EAAE,CAAC4B,UAAU,CAACZ,QAAQ,CAAC;gBAAAG,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAU,MAAA,WACjBC,gCAAe,CAACC,aAAa,CAACjB,GAAG,EAAE,CAAC,CAAC,EAAE,iBAAiB,EAAE,GAAG,CAAC;YAAA;cAGzE,IAAId,EAAE,CAAC4B,UAAU,CAACZ,QAAQ,CAAC,EAAE;gBACzBhB,EAAE,CAACgC,MAAM,CAAChB,QAAQ,EAAE,UAACiB,GAAG,EAAK;kBACzB,IAAIA,GAAG,EAAE;oBACL,MAAMA,GAAG;kBACb;kBACA,OAAOH,gCAAe,CAACI,eAAe,CAACpB,GAAG,EAAE,CAAC,CAAC,EAAE,4BAA4B,CAAC;gBACjF,CAAC,CAAC;cACN;cAACK,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAgB,EAAA,GAAAhB,QAAA;cAIDiB,OAAO,CAACC,GAAG,CAAAlB,QAAA,CAAAgB,EAAI,CAAC;cAAC,OAAAhB,QAAA,CAAAU,MAAA,WACVC,gCAAe,CAACC,aAAa,CAACjB,GAAG,EAAAK,QAAA,CAAAgB,EAAK,CAAC;YAAA;YAAA;cAAA,OAAAhB,QAAA,CAAAmB,IAAA;UAAA;QAAA,GAAA1B,OAAA;MAAA,CAGrD;MAAA,SAAA2B,QAAAC,EAAA,EAAAC,GAAA;QAAA,OAAAjC,QAAA,CAAAkC,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAJ,OAAA;IAAA;EAAA;EAAA,OAAArC,oBAAA;AAAA;AAAA,IAAA0C,QAAA,GAAAC,OAAA,CAAAzC,OAAA,GAIU,IAAIF,oBAAoB,CAAC,CAAC"}